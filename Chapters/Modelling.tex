\section{Modelling} \label{sec:mod} % Incl. Subsection "Component Models"

\subsection{wtLin model}
A Matlab tool named wtLin has been developed by the LaC department in Vestas for creating linear model based on parameters extracted from Vestas Turbine Simulator (VTS). The tool specific turbine model files and an operating point to create individual components which can be connected in loops. Each component translates one or more inputs to one or more outputs. In this section the relevant component models contained in wtLin will be outlined.\\

\subsubsection{Drivetrain (stiff)}
The drivetrain is modelled from newtons second law as such:
\begin{equation}\label{eq:wtlin_comp_drivetrain}
	(J_{gL} + J_{r}) \ddot{\theta}_r = M_{r} + M_{g}
\end{equation}
\begin{equation}\label{eq:wtlin_comp_drivetrain}
	(J_{gL} + J_{r}) \ddot{\theta}_r = T_{r} + T_{g}
\end{equation}
The torques are related to the low-speed (rotor) side and thus the high-speed side inertias are mapped to the low speed side:
\begin{equation} \label{eq:wtlin_comp_inertiamap}
	J_{gL} = J_{gL} = J_{gH} \left(\dfrac{N_r}{N_g}\right)^2
\end{equation}
where $ N_r $ and $ N_g $ is the number of teeth on the rotor and generator side of the gearbox respectively.


\subsubsection{Drivetrain (flexible)}
There is also a flexible drivetrain model. Here the drivetrain is modelled as two free inertias coupled through a spring with stiffness $ K $ and a dampener with dampening $ B $. The rotor spins at angular velocity $ \ddot{\theta}_r $ and the generator $ \ddot{\theta}_g = N \ddot{\theta}_r $
\begin{align} \label{eq:wtlin_comp_drivetrain_flex}
	J_{g} \ddot{\theta}_g & = -B \dot{\theta}_{gL} + K(\theta_r - \theta_{gL}) - M_{g} \\
	J_{r} \ddot{\theta}_r & = -B \dot{\theta}_{gL} -B - K(\theta_r - \theta_{gL}) + M_{r} \\
	\dot{\theta}_g & = \left(\dfrac{N_r}{N_g}\right) \dot{\theta}_{gL}
\end{align}












% Template:
%\begin{equation}\label{eq:wtlin_comp_}
%	
%\end{equation}

